# Cursor Agent批量自动化任务实践总结报告：从理想到现实的反思

**日期**: 2025-10-20  
**任务**: 批量下载知网文献200篇  
**结论**: Agent不是万能的，稳定性 > 智能性

---

## 一、项目背景

**目标很简单**：下载钱学森相关文献200篇，按1-20、21-40...分组保存。

**初始想法**：听说Cursor Agent很智能，结合Chrome DevTools MCP能自动控制浏览器，那就让AI干吧！

**最终结果**：173/200篇（86.5%），但过程一言难尽。

---

## 二、技术方案演进：从理想到现实

### 阶段1：Agent + MCP（期望很美好）

**选择理由**：
- ✨ 大家都说Agent智能
- ✨ MCP能控制浏览器，听起来很酷
- ✨ 自然语言交互，不用写代码

**技术路径**：
```
打开知网 → 批量打开详情页 → 逐个点击下载 → 移动文件
```

**初期表现**：第一次用还行，成功下载了几十篇，感觉不错。

### 阶段2：问题暴露（现实很骨感）

#### 问题1：MCP连接像薛定谔的猫
- 时而连接，时而掉线
- 明明刚用完，下次就识别不到
- **感觉**：在跟AI玩"你猜我在不在"游戏

#### 问题2：Agent有自己的想法
- **我说**："批量打开20个页面"
- **它做**：打开10个，然后决定先下载5个，再打开剩下的
- **我说**："不要关闭标签页"
- **它做**：关了，理由是"为了提高效率"

就算明确告诉它"不能做什么"，它还是会创造性发挥。

#### 问题3：可重复性是个迷
- **第1次**：成功下载20篇，流程很顺
- **第2次**：用同样的指令，下载了15篇，有5个验证码
- **第3次**：只下载了8篇，然后卡在某个页面不动了

**每次执行都是开盲盒**。

#### 问题4：调试时间 > 实际执行时间
- 花20分钟跟Agent解释需求
- 花30分钟修正Agent的"创造性行为"
- 花10分钟实际下载
- **算账**：人力成本太高

### 阶段3：传统方案（无聊但可靠）

**转向**：Python脚本 + Tampermonkey插件

**新流程**：
```javascript
// Tampermonkey自动点击下载按钮
document.querySelectorAll('.download-btn').forEach(btn => btn.click());
```

```python
# Python批量移动文件
import shutil
from pathlib import Path

for pdf in Path('Downloads').glob('*.pdf'):
    shutil.move(pdf, target_folder)
```

**体验**：
- ✅ 没有智能对话，但每次都一样
- ✅ 代码100行，调试1次，复用100次
- ✅ 不会突然掉线或"创造性发挥"
- ✅ 可预期：输入确定，输出确定

---

## 三、核心教训

### 1. 智能≠可靠

Agent确实智能，但**不稳定**：
- 连接问题（MCP掉线）
- 行为不可控（有自己想法）
- 结果不确定（每次不一样）

对于需要**精确可重复性**的任务，智能反而成了负担。

### 2. Agent适用场景

✅ **适合**：
- 一次性任务（写个报告、分析个数据）
- 探索性任务（不确定具体步骤）
- 容错性高的任务（差不多就行）

❌ **不适合**：
- 批量重复任务（需要精确重复）
- 对稳定性要求高（不能中断）
- 需要可复用的流程（写一次用多次）

### 3. 技术选型的真相

**不是"哪个更先进"，而是"哪个更合适"**。

| 维度 | Agent | 传统脚本 |
|------|-------|---------|
| 开发速度 | 快（第一次） | 慢（需要写代码） |
| 稳定性 | 😅 看运气 | ✅ 高度稳定 |
| 可复用性 | ❌ 每次重新调试 | ✅ 写一次用N次 |
| 调试成本 | 🔥 无底洞 | ✅ 一次性投入 |
| 适用场景 | 探索、一次性 | 批量、重复性 |

**结论**：简单重复任务，老老实实写脚本。

---

## 四、技术选型建议

### 决策树

```
需要批量执行？
├─ 是 → 需要精确重复？
│  ├─ 是 → 用脚本（Python/JS）
│  └─ 否 → 容错性高？
│     ├─ 是 → 可以试Agent
│     └─ 否 → 还是用脚本吧
└─ 否 → 一次性任务？
   ├─ 是 → 用Agent（方便）
   └─ 否 → 看情况
```

### 实用原则

1. **先问自己**：这个任务要执行几次？
   - 1次：Agent快
   - 10次以上：写脚本

2. **再问自己**：能容忍10%的失败率吗？
   - 能：Agent可以
   - 不能：脚本保平安

3. **最后问自己**：我愿意花多少时间调试？
   - 无限：用Agent（开盲盒）
   - 有限：写脚本（一劳永逸）

---

## 五、项目实际成果

虽然过程曲折，但还是有收获：

### 文档产出
- ✅ 完整的技术文档体系（9个Markdown文件）
- ✅ 详细的问题解决方案
- ✅ 可复用的代码模板

### 下载成果
- ✅ 173篇PDF文献（86.5%完成率）
- ✅ 分类整理（10个文件夹）
- ✅ 进度数据（JSON格式）

### 技术积累
- ✅ Chrome DevTools MCP使用经验
- ✅ Python文件操作最佳实践
- ✅ 知网反爬虫应对策略

**最重要的**：认清了Agent的适用边界。

---

## 六、给未来的自己

### 遇到批量任务时

**第一反应**：先问"这个任务的确定性要求高吗？"

**如果高**：
```python
# 乖乖写脚本
for item in items:
    process(item)
```

**如果低**：
```
"嘿Agent，帮我处理一下这批数据"
```

### 关于Agent的态度

**不是不用Agent，而是用对地方**。

Agent是工具，不是信仰：
- ✅ 探索阶段：让Agent帮你试错
- ✅ 方案不明确：让Agent给建议
- ❌ 生产环境：别让Agent瞎搞
- ❌ 批量任务：脚本更靠谱

### 最后的感悟

**AI时代，稳定性比智能性更重要。**

能稳定完成100次的笨方法 > 第一次很惊艳但第二次翻车的智能方案。

**技术选型本质**：不是追求最新最酷，而是找到"最合适 + 最稳定"的组合。

---

## 附录：关键数据

| 项目 | 数据 |
|------|------|
| 任务总量 | 200篇文献 |
| 实际完成 | 173篇（86.5%） |
| 完整分组 | 4/10（1-20, 81-100, 101-120, 141-160） |
| 待补充 | 27篇 |
| 文档产出 | 9个Markdown文件（约12,000行） |
| 时间跨度 | 2天（2025-10-19至10-20） |
| 主要工具 | Cursor Agent → Python + Tampermonkey |

---

**教训**：Agent很酷，但批量任务还是写脚本吧。🤷‍♂️

**更新日期**: 2025-10-20  
**适用场景**: 任何需要批量重复执行的自动化任务技术选型参考

